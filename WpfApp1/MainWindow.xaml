<Window x:Class="VectorEditor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Векторный графический редактор" Height="650" Width="1070">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        

        <!-- Панель инструментов -->
        <ToolBar Grid.Row="0" Height="60" Background="#FFF0F0F0">

            <!-- Переключатель режимов -->
            <StackPanel Orientation="Vertical" VerticalAlignment="Center">
                <RadioButton x:Name="drawModeRadio" Content="🆕 Создание" GroupName="Mode" IsChecked="True"
                   FontSize="11" Padding="3"/>
                <RadioButton x:Name="editModeRadio" Content="🔧 Редактирование" GroupName="Mode"
                   FontSize="11" Padding="3"/>
            </StackPanel>

            <Separator/>

            <!-- Инструменты создания -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="Фигуры:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <ComboBox x:Name="shapeComboBox" Width="135" VerticalAlignment="Center">
                    <ComboBoxItem Content="⬜ Прямоугольник"/>
                    <ComboBoxItem Content="⭕ Эллипс"/>
                    <ComboBoxItem Content="📏 Линия"/>
                    <ComboBoxItem Content="🔺 Многоугольник"/>
                </ComboBox>
            </StackPanel>

            <Separator/>

            <!-- Инструменты редактирования -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <Button x:Name="fillColorButton" Content="🎨 Заливка" Click="FillColorButton_Click" Margin="2"/>
                <Button x:Name="strokeColorButton" Content="✏️ Обводка" Click="StrokeColorButton_Click" Margin="2"/>
                <Button Content="❌ Удалить" Click="DeleteButton_Click" Margin="2"/>
                <Button Content="↶ Отменить" Click="UndoButton_Click" Margin="2"/>
            </StackPanel>

            <Separator/>

            <!-- Масштабирование -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="🔍 Масштаб:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <Slider x:Name="zoomSlider" Minimum="0.1" Maximum="3" Value="1" Width="80" 
                ValueChanged="ZoomSlider_ValueChanged" VerticalAlignment="Center"/>
                <TextBlock x:Name="zoomText" Text="100%" VerticalAlignment="Center" Margin="5,0,5,0" Width="40"/>
                <Button Content="🔄" Click="ZoomResetButton_Click" ToolTip="Сбросить масштаб" Width="30" Margin="2"/>
            </StackPanel>

            <Separator/>

            <!-- Кнопка сохранения -->
            <Button Content="💾 Сохранить" Click="SaveButton_Click" ToolTip="Сохранить в SVG" 
            Padding="10,3"/>
        </ToolBar>

        <!-- Холст -->
        <ScrollViewer Grid.Row="1" x:Name="scrollViewer" HorizontalScrollBarVisibility="Auto" 
              VerticalScrollBarVisibility="Auto" Background="White">
            <Canvas x:Name="mainCanvas" 
            MouseDown="MainCanvas_MouseDown"
            MouseMove="MainCanvas_MouseMove"
            MouseUp="MainCanvas_MouseUp"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch">
                <!-- Сетка для визуального ориентирования -->
                <Canvas.Background>
                    <DrawingBrush Viewport="0,0,20,20" ViewportUnits="Absolute" TileMode="Tile">
                        <DrawingBrush.Drawing>
                            <GeometryDrawing>
                                <GeometryDrawing.Geometry>
                                    <RectangleGeometry Rect="0,0,20,20"/>
                                </GeometryDrawing.Geometry>
                                <GeometryDrawing.Pen>
                                    <Pen Brush="LightGray" Thickness="0.4"/>
                                </GeometryDrawing.Pen>
                            </GeometryDrawing>
                        </DrawingBrush.Drawing>
                    </DrawingBrush>
                </Canvas.Background>
            </Canvas>
        </ScrollViewer>
    </Grid>
</Window>